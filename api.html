<?php

$channel = $_GET['c'];

$url = "https://spapi.zee5.com/singlePlayback/getDetails/secure?channel_id=$channel&device_id=c3fb3366-aa92-4f5a-8b75-e27d6731a33a&platform_name=mobile_web&translation=en&user_language=hi&country=IN&state=UP&app_version=4.0.18&user_type=premium&check_parental_control=false&gender=Male&age_group=18-24&uid=45898de8-81a8-49f0-95f8-1d1e915d967f&ppid=c3fb3366-aa92-4f5a-8b75-e27d6731a33a&version=12";

$curl = curl_init();

curl_setopt_array($curl, array(
  CURLOPT_URL => $url,
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_ENCODING => '',
  CURLOPT_MAXREDIRS => 10,
  CURLOPT_TIMEOUT => 0,
  CURLOPT_FOLLOWLOCATION => true,
  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
  CURLOPT_CUSTOMREQUEST => 'POST',
  CURLOPT_POSTFIELDS => '{
    "x-access-token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybV9jb2RlIjoiV2ViQCQhdDM4NzEyIiwiaXNzdWVkQXQiOiIyMDI0LTAxLTI5VDA5OjQzOjQ5LjYzM1oiLCJwcm9kdWN0X2NvZGUiOiJ6ZWU1QDk3NSIsInR0bCI6ODY0MDAwMDAsImlhdCI6MTcwNjUyMTQyOX0.tNBe6EHlkfoJFEcX4FT5YRFiFwkL08VS0aiYcfAsy-k",  
    "Authorization": "eyJraWQiOiJlNmxfbGYweHpwYVk4VzBNcFQzWlBzN2hyOEZ4Y0trbDhDV0JaekVKT2lBIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJzdWIiOiI0NTg5OERFOC04MUE4LTQ5RjAtOTVGOC0xRDFFOTE1RDk2N0YiLCJzdWJzY3JpcHRpb25zIjoiW3tcImlkXCI6XCI2MDA0YWVjNS02NDY4LTExZWUtODc5Zi0yOTE2YTA3NDdkNThcIixcInVzZXJfaWRcIjpcIjQ1ODk4ZGU4LTgxYTgtNDlmMC05NWY4LTFkMWU5MTVkOTY3ZlwiLFwiaWRlbnRpZmllclwiOlwiQ1JNXCIsXCJzdWJzY3JpcHRpb25fcGxhblwiOntcImlkXCI6XCIwLTExLTIwNzNcIixcImFzc2V0X3R5cGVcIjoxMSxcInN1YnNjcmlwdGlvbl9wbGFuX3R5cGVcIjpcIlNWT0RcIixcInRpdGxlXCI6XCJQcmVwYWlkIENvZGUgUGFjayAtIDEyIG1vbnRoc1wiLFwib3JpZ2luYWxfdGl0bGVcIjpcIlByZXBhaWQgQ29kZSBQYWNrIC0gMTIgbW9udGhzXCIsXCJzeXN0ZW1cIjpcIkJTTkxcIixcImRlc2NyaXB0aW9uXCI6XCJQcmVtaXVtIC0gMTIgbW9udGhzIC0gcHJlcGFpZCBjb2Rlc1wiLFwiYmlsbGluZ19jeWNsZV90eXBlXCI6XCJkYXlzXCIsXCJiaWxsaW5nX2ZyZXF1ZW5jeVwiOjM2NSxcInByaWNlXCI6ODk5LFwiY3VycmVuY3lcIjpcIklOUlwiLFwiY291bnRyaWVzXCI6W1wiSU5cIl0sXCJzdGFydFwiOlwiMjAyMi0wMy0xNFQxNzowNDowMFpcIixcImVuZFwiOlwiMjA1MC0xMi0zMVQyMzo1OTowMFpcIixcIm9ubHlfYXZhaWxhYmxlX3dpdGhfcHJvbW90aW9uXCI6ZmFsc2UsXCJyZWN1cnJpbmdcIjpmYWxzZSxcInBheW1lbnRfcHJvdmlkZXJzXCI6W3tcIm5hbWVcIjpcIlplZTVcIixcInByb2R1Y3RfcmVmZXJlbmNlXCI6bnVsbH1dLFwicHJvbW90aW9uc1wiOltdLFwiYXNzZXRfdHlwZXNcIjpbMCw2LDldLFwiYXNzZXRfaWRzXCI6W1wiXCJdLFwiZnJlZV90cmlhbFwiOjAsXCJidXNpbmVzc190eXBlXCI6XCJmcmVlXCIsXCJiaWxsaW5nX3R5cGVcIjpcInByZW1pdW1cIixcIm51bWJlcl9vZl9zdXBwb3J0ZWRfZGV2aWNlc1wiOjIsXCJtb3ZpZV9hdWRpb19sYW5ndWFnZXNcIjpbXSxcInR2X3Nob3dfYXVkaW9fbGFuZ3VhZ2VzXCI6W10sXCJjaGFubmVsX2F1ZGlvX2xhbmd1YWdlc1wiOltdLFwiZHVyYXRpb25fdGV4dFwiOlwiXCIsXCJ2YWxpZF9mb3JfYWxsX2NvdW50cmllc1wiOnRydWUsXCJhbGxvd2VkX3BsYXliYWNrX2R1cmF0aW9uXCI6NixcIm9mZmVyX2lkXCI6MCxcImNhdGVnb3J5XCI6XCJcIixcImFjdHVhbF92YWx1ZVwiOjAsXCJiZWZvcmVUdlwiOnRydWV9LFwic3Vic2NyaXB0aW9uX3N0YXJ0XCI6XCIyMDIzLTEwLTA2VDE2OjQ5OjU0LjAwMFpcIixcInN1YnNjcmlwdGlvbl9lbmRcIjpcIjIwMjQtMTAtMDVUMjM6NTk6NTlaXCIsXCJzdGF0ZVwiOlwiYWN0aXZhdGVkXCIsXCJyZWN1cnJpbmdfZW5hYmxlZFwiOmZhbHNlLFwicGF5bWVudF9wcm92aWRlclwiOm51bGwsXCJmcmVlX3RyaWFsXCI6bnVsbCxcImNyZWF0ZV9kYXRlXCI6bnVsbCxcImlwX2FkZHJlc3NcIjpudWxsLFwiY291bnRyeVwiOlwiSU5cIixcImFkZGl0aW9uYWxcIjp7XCJyZWdpb25cIjpcIk1BSEFSQVNIVFJBXCIsXCJjb3VudHJ5XCI6XCJJTlwiLFwicGFydG5lclwiOlwiWkVFNVwiLFwic3Vic190eXBlXCI6XCJpbnRlcm5hbF9zdWJzXCIsXCJjb3Vwb25jb2RlXCI6XCJaNUNQSkEyM1k2UDQxUlwiLFwiaXBfYWRkcmVzc1wiOlwiMTAzLjE1NS4yMDkuMTg5LCAyMy42My4xMTEuMjA1LCAyMy42My4xMTAuMjMsMTAuMjQzLjEzNy4zNFwiLFwicGF5bWVudG1vZGVcIjpcIlByZXBhaWRDb2RlXCJ9LFwiYWxsb3dlZF9iaWxsaW5nX2N5Y2xlc1wiOjAsXCJ1c2VkX2JpbGxpbmdfY3ljbGVzXCI6MH1dIiwiYWN0aXZhdGlvbl9kYXRlIjoiMjAyMS0xMi0zMFQxNTo0NzoxOC44NDNaIiwiYW1yIjpbImRlbGVnYXRpb24iXSwiaXNzIjoiaHR0cHM6Ly91c2VyYXBpLnplZTUuY29tIiwiY3VycmVudF9jb3VudHJ5IjoiSU4iLCJjbGllbnRfaWQiOiJyZWZyZXNoX3Rva2VuIiwiYWNjZXNzX3Rva2VuX3R5cGUiOiJEZWZhdWx0UHJpdmlsZWdlIiwidXNlcl90eXBlIjoiUmVnaXN0ZXJlZCIsInVzZXJfbW9iaWxlIjoiOTE3NDU0MDIyNDA5Iiwic2NvcGUiOlsidXNlcmFwaSIsInN1YnNjcmlwdGlvbmFwaSIsInByb2ZpbGVhcGkiXSwiYXV0aF90aW1lIjoxNzA2NTI1MTcyLCJzZXNzaW9uX3R5cGUiOiJHRU5FUkFMIiwiZXhwIjoxNzA5MTU1MTcyLCJpYXQiOjE3MDY1MjUxNzIsImp0aSI6IjMwYTg5ZjNlLTJlNDMtNGM5Yi05MWMzLTJiY2NmOTFlMzJmYSIsImRldmljZV9pZCI6ImMzZmIzMzY2LWFhOTItNGY1YS04Yjc1LWUyN2Q2NzMxYTMzYSIsInJlZ2lzdHJhdGlvbl9jb3VudHJ5IjoiSU4iLCJ2ZXJzaW9uIjo1LCJhdWQiOlsidXNlcmFwaSIsInN1YnNjcmlwdGlvbmFwaSIsInByb2ZpbGVhcGkiLCJnYW1lLXBsYXkiXSwic3lzdGVtIjoiWjUiLCJuYmYiOjE3MDY1MjUxNzIsImlkcCI6ImxvY2FsIiwidXNlcl9pZCI6IjQ1ODk4ZGU4LTgxYTgtNDlmMC05NWY4LTFkMWU5MTVkOTY3ZiIsImNyZWF0ZWRfZGF0ZSI6IjIwMjEtMTItMzBUMTU6NDc6MTguODQzWiIsImFjdGl2YXRlZCI6dHJ1ZX0.FUIi5kdfUThOfzFWUOQeEHNknVpxezkvfzVcvkBWFm3DtellIms74lDQpHtr1JCAKOU8O4Lx-TakjiL__2Mmx8BDiZ292zkktALoWfDlVJNFqx1N4XMn9sajcQJam581DZwIzclF9mucN0u4z01QLxpKX_ksm9sP1tZPPvvbdz5k7lxx5xFfS1FBJV7a_XzOM8lYdrISCvm3i_R_dF259ze8G5lh9NJlwTSjPgf_sOEJErK3tS5d6neiWC2LBDpdPVwbdUPJsWb-tchN62cqbs1w6nqiXfsfMk64z-7t_S99OIfC-oXf6N1Se_ApxsFmAsjrTjWDmgeC_mH7twgIYA",  
    
    // Place your Zee5 API token here
  }',
  CURLOPT_HTTPHEADER => array(
    'Content-Type: application/json'
  ),

)
);

$response = curl_exec($curl);

if ($response === false) {
  echo 'Error: ' . curl_error($curl);
}

curl_close($curl);

$zx = json_decode($response, true);

if (isset($zx["keyOsDetails"]['video_token'])) {
  $playit = $zx["keyOsDetails"]['video_token'];
  header("Location: $playit", true, 301);
} else {
  echo "Error: Video token not found.";
}
?>